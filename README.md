# cpp_hw_1_ci
helloworld
Условие
Написать программу выводящую на консоль две строки
build N
Hello, World!
Где вместо N должен выводиться текущий номер сборки.
Запустить на этапе сборки тесты, проверяющие валидность номера версии.
GitHub
Если нет аккаунта, завести его на https://github.com/join и опубликовать исходные тексты в репозиторий.
Название репозитория остаётся на ваше усмотрение. На каждое практическое занятие репозиторий будет
свой.
Bintray
Создать Open Source Account (важно чтобы не Trial).
Figure 1: Главная страница Bintray
Залогиниться на https://bintray.com/ для под своим аккаунтом GitHub (Sign up with Github). Создать новый
репозиторий - имя произвольное (например otus-cpp, обощающее для всех практических работ курса), тип
Debian, Default Licenses любая. После создания отредактировать включив GPG sign. Делается один раз,
будет использоваться для публикации всех дальнейших заданий.
Создать в созданном репозитории новый пакет - имя произвольное (например homework, обобщающее для
всех практических работ курса). Ссылка на контроль версии может быть указана как - (знак минус, просто
чтобы было заполнено). Делается так же один раз.
По ссылке https://bintray.com/profile/edit в пункте API Key скопировать ключ.
Travis CI
Залогиниться на https://travis-ci.org/ (важно чтобы .org, а не .com) и включить для своего репозитория
автоматическую сборку.
Рядом с переключателем, в настройках репозитория добавить (Environment Variables, Add), переменную,
например BINTRAY_API_KEY, и в качестве значения - скопированный ранее ключ API Key. Это позволит не
компрометировать ключ в исходниках. Эту операцию будем повторять для каждой следующей работы.
CI/CD
Завершающим этапом в корне репозитория с исходниками создать файл .travis.yml с необходимыми
сценариями сборки.
1
Figure 2: Настройки аккаунта
2
Лишний раз проверьте
• репозиторий Bintray подписан до публикации пакета (можно повторно опубликовать, если забыли
включить сразу)
• убедитесь, что логах сборки в секции deploy вы увидели сообщение {"message":"success"}
Результат
• пакет helloworld содержащий исполняемый файл helloworld опубликован на Bintray
• отправлена на проверку ссылка на страницу решения (github)
Проверка
Задание считается выполненно успешно, если после подключения репозитория
$ echo "deb http://dl.bintray.com/login/otus-cpp xenial main" \
| sudo tee -a /etc/apt/sources.list.d/otus.list
установки пакета
$ apt update && apt install -y helloworld
запуска бинарного файла
$ helloworld
появилось сообщение
build N
Hello, World!
Оценка
баллы за что
3 Успешно прошла проверка.
1 В репозитории нет лишних файлов, только необходимые для сборки исходники.
1 В репозитории не засветился секретный ключ.
1 При сборке запустился хотя бы один тест.
1 Нет ни одного предупреждения от компилятора.
1 Увеличивается номер версии в приложении и пакете при повторных сборках.
3
